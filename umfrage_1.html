<!DOCTYPE html>
<html>

<head>
    <title>Survey Project</title>
    <link rel="stylesheet" href="css/umfrage.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1"></script>
    <script src="https://unpkg.com/handsfree@8.5.1/build/lib/handsfree.js"></script>
</head>

<body>
    <div class="background-animation"></div>
    <div class="container">
        <h4>These 1</h4>
        <h1>Die Automatisierung digitaler Kommunikation wird kurzfristig über-, aber langfristig unterschätzt.</h1>
        <div class="buttons-container">
            <button id="yes-button" class="yes-button" onclick="window.location.href='umfrage_2.html';">Ja</button>
            <button id="no-button" class="no-button" onclick="window.location.href='umfrage_2.html';">Nein</button>
        </div>
        <video id="handsfree-video" style="visibility: hidden;"></video>
    </div>
    <h6 class="bottom-text">1|4</h6>
    <script src="js/umfrage.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function(event) {
            // Event-Handler für Daumen nach oben (Yes-Geste)
            function handleThumbUpGesture() {
                // Aktionen ausführen, wenn Daumen nach oben erkannt wurde
                console.log("Daumen nach oben (Yes-Geste)");
                // Yes-Button programmatisch klicken
                document.getElementById("yes-button").click();
            }

            // Event-Handler für Daumen nach unten (No-Geste)
            function handleThumbDownGesture() {
                // Aktionen ausführen, wenn Daumen nach unten erkannt wurde
                console.log("Daumen nach unten (No-Geste)");
                // No-Button programmatisch klicken
                document.getElementById("no-button").click();
            }

            // Handsfree initialisieren
            const handsfree = new Handsfree({ hands: true });
            
            // Event-Handler für Handerkennung
            handsfree.use('hands', (data) => {
                // Überprüfe, ob mindestens eine Hand erkannt wurde
                if (data.hands?.multiHandLandmarks.length > 0) {
                    const handLandmarks = data.hands.multiHandLandmarks[0];
                    const thumbTip = handLandmarks[4];
                    const thumbBase = handLandmarks[2];
                    const handClosed = thumbTip.y > thumbBase.y;
                    const isRightHand = data.hands.multiHandedness[0].label === 'Right';

                    // Überprüfe, ob die erkannte Hand die rechte Hand ist
                    if (isRightHand) {
                        if (!handClosed && thumbBase.x < thumbTip.x) {
                            // Daumen nach oben (Yes-Geste)
                            handleThumbUpGesture();
                        } else if (handClosed && thumbBase.x > thumbTip.x) {
                            // Daumen nach unten (No-Geste)
                            handleThumbDownGesture();
                        }
                    }
                }
            });
            // Handsfree starten
            handsfree.start();
        });
    </script>
</body>

</html>